<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Perfil do Usuário</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" />
  <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet" />
  <style>
    :root {
      --background-color: #f3f4f6;
      --primary-color: #10b981;
      --secondary-color: #1f2937;
      --text-color: #1a1a1a;
      --hover-background: #374151;
      --card-background: #ffffff;
      --card-text-color: #4b5563;
      --footer-background: #374151;
      --footer-text-color: #9ca3af;
      --border-color: #e5e7eb;
    }

    .dark-theme {
      --background-color: #1f2937;
      --primary-color: #10b981;
      --secondary-color: #374151;
      --text-color: #e5e7eb;
      --hover-background: #4b5563;
      --card-background: #374151;
      --card-text-color: #d1d5db;
      --footer-background: #4b5563;
      --footer-text-color: #e5e7eb;
      --border-color: #6b7280;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      height: 100vh;
      background-color: var(--background-color);
      font-family: Arial, sans-serif;
      color: var(--text-color);
      overflow: hidden;
    }

    main {
      display: flex;
      height: 100%;
    }

    .main-left-content {
      width: 25%;
      background-color: var(--secondary-color);
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      padding: 2% 0;
      color: var(--text-color);
      border-radius: 8px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
    }

    .main-left-content-header {
      text-align: center;
      padding: 20px 0;
    }

    .main-left-content-header img {
      width: 120px;
      border-radius: 50%;
      margin-bottom: 10px;
    }

    .main-left-content-main ul {
      list-style: none;
      padding: 0;
    }

    .main-left-content-main ul li {
      margin: 10px 0;
    }

    .main-left-content-main ul li a {
      display: flex;
      align-items: center;
      padding: 15px 20px;
      font-size: 1.1em;
      text-decoration: none;
      color: var(--footer-text-color);
      border-radius: 8px;
      transition: all 0.3s ease;
    }

    .main-left-content-main ul li a:hover {
      background-color: var(--hover-background);
      color: var(--text-color);
    }

    .main-left-content-main ul li a i {
      margin-right: 12px;
      font-size: 1.3em;
    }

    .main-left-content-footer {
      text-align: center;
      padding: 15px 0;
      background-color: var(--footer-background);
      border-radius: 0 0 8px 8px;
      color: var(--footer-text-color);
    }

    .main-right-content {
      width: 75%;
      padding: 20px;
      display: flex;
      flex-direction: column;
      gap: 20px;
    }

    .main-right-content-header h1 {
      font-size: 1.8em;
      color: var(--primary-color);
      font-weight: bold;
      border-bottom: 4px solid var(--border-color);
      padding-bottom: 10px;
    }

    .main-right-content-main {
      display: flex;
      gap: 20px;
      flex-direction: column;
      height: 100%;
    }

    .card {
      width: 60%;
      margin: auto;
      padding: 20px;
      background-color: #ffffff;
      border-radius: 8px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    }

    .card h2 {
      text-align: center;
      color: #10b981;
      margin-bottom: 20px;
    }

    .form-two-columns {
      display: flex;
      justify-content: space-between;
      gap: 20px;
    }

    .form-column {
      flex: 1;
      display: flex;
      flex-direction: column;
      gap: 15px;
    }

    .form-column label {
      font-weight: bold;
      color: #374151;
    }

    .form-column input,
    select {
      padding: 10px;
      border: 1px solid #d1d5db;
      border-radius: 4px;
      font-size: 1em;
    }

    button {
      width: 100%;
      margin-top: 20px;
      padding: 10px;
      background-color: #10b981;
      color: #ffffff;
      border: none;
      font-size: 1em;
      cursor: pointer;
      border-radius: 4px;
      transition: background-color 0.3s;
    }

    button:hover {
      background-color: #059669;
    }
  </style>
</head>

<body>
  <main>
    <section class="main-left-content">
      <button id="buttonId" onclick="toggleDarkMode()">
        <i id="theme-icon" class="fa fa-sun"></i>
        Alternar Modo Escuro
      </button>
      <div class="main-left-content-header">
        
        <img src="../../img/avatar-design.png" alt="Icone de Administrador" />
        <h1>Administrador</h1>
      </div>
      <div class="main-left-content-main">
        <ul>
          <li>
            <a href="./painel_principal.html" target="_parent">
              <i class="fa-solid fa-chart-line"></i>
              <span>Painel Principal</span>
            </a>
          </li>
          <li>
            <a href="./adicionar_usuarios.html" target="_parent">
              <i class="fa-solid fa-user-plus"></i>
              <span>Adicionar e Listar Usuários</span>
            </a>
          </li>
          <li>
            <a href="./clientes.html" target="_parent">
              <i class="fa-solid fa-users"></i>
              <span>Listar Clientes</span>
            </a>
          </li>
          <li>
            <a href="./perfil_usuarios.html" target="_parent">
              <i class="fa-solid fa-user-gear"></i>
              <span>Perfil do Usuário</span>
            </a>
          </li>
          <li>
            <a href="./relatorio.html" target="_parent">
              <i class="fa-solid fa-file-lines"></i>
              <span>Relatórios</span>
            </a>
          </li>
          <li>
            <a href="../../../login_page.html">
              <i class="fa-solid fa-right-to-bracket"></i>
              <span>Log Out</span>
            </a>
          </li>
        </ul>
      </div>      
      <div class="main-left-content-footer">
        <h1>Administrador</h1>
      </div>
    </section>
    <section class="main-right-content">
      <div class="main-right-content-header">
        <h1>Meu Perfil</h1>
      </div>
      <div class="main-right-content-main">
        <div class="card">
          <form class="form-two-columns">
            <div class="form-column">
              <div class="main-left-content-header">
                <img src="../../img/avatar-design.png" alt="Icone de Administrador" />
                <h2>Administrador</h1>
              </div>
              <label for="functionUser">Função do usuário</label>
              <select name="functionUser" id="functionUser" disabled>
                <option value="option1">Administrador</option>
                <option value="option2">Usuário</option>
              </select>

              <label for="name">Nome Completo</label>
              <input type="text" name="name" id="name" disabled />

              <label for="date">Data de Nascimento</label>
              <input type="date" name="date" id="date" disabled />

              <label for="tel">Telefone</label>
              <input type="tel" name="tel" id="tel" disabled />
            </div>
            <div class="form-column">
              <label for="email">Email</label>
              <input type="email" name="email" id="email" disabled />

              <label for="user">Usuário</label>
              <input type="text" name="user" id="user" disabled />

              <label for="password">Palavra Passe</label>
              <input type="password" name="password" id="password" disabled />
              <button type="submit">
                Atualizar
                <i class="fa-solid fa-arrows-rotate"></i>
              </button>
            </div>
          </form>
        </div>
      </div>
    </section>
  </main>
  <script>
    function toggleDarkMode() {
      document.documentElement.classList.toggle("dark-theme");
      const button = document.getElementById("buttonId");
      if (document.documentElement.classList.contains("dark-theme")) {
        button.innerHTML =
          '<i id="theme-icon" class="fa fa-moon"></i> Alternar Modo Claro';
      } else {
        button.innerHTML =
          '<i id="theme-icon" class="fa fa-sun"></i> Alternar Modo Escuro';
      }
    }
  
    document.addEventListener("DOMContentLoaded", () => {
      // Obter o usuário armazenado no localStorage
      const usuario = JSON.parse(localStorage.getItem("usuario"));
  
      if (!usuario) {
        alert("Usuário não autenticado");
        window.location.href = "../../../login.html"; 
        return;
      }
  
      // Função para formatar a data (caso tenha)
      function formatDate(dateString) {
        const date = new Date(dateString);
        if (isNaN(date)) return ''; 
        return date.toISOString().split('T')[0]; 
      }
  
      // Preencher os campos do formulário com os dados do usuário
      document.getElementById("name").value = usuario.nome_usuario;
      document.getElementById("password").value = usuario.palavra_passe;
      document.getElementById("user").value = usuario.username;
      document.getElementById("email").value = usuario.email || ''; // Se não houver email, usa uma string vazia
      document.getElementById("tel").value = usuario.telefone || ''; // Se não houver telefone, usa uma string vazia
      document.getElementById("date").value = formatDate(usuario.data_nascimento);
      
      // Definindo o campo de função do usuário
      const funcao = usuario.funcao.toLowerCase();
      if (funcao === "admin") {
        document.getElementById("functionUser").value = "option1"; // 'Administrador'
      } else if (funcao === "farmaceutico") {
        document.getElementById("functionUser").value = "option2"; // 'Farmaceutico'
      } else {
        alert("Função administrativa não encontrada!");
      }
    });
  </script>
  
</body>

</html>